

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Declarative End State and Promise Theory &mdash; ACI Troubleshooting Book 0.0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="ACI Troubleshooting Book 0.0.1 documentation" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> ACI Troubleshooting Book</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../preface.html">Preface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#authors-and-contributors">Authors and Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#authors">Authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#distinguished-contributors">Distinguished Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#dedications">Dedications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#acknowledgments">Acknowledgments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#book-writing-methodology">Book Writing Methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#who-should-read-this-book">Who Should Read This Book?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#organization-of-this-book">Organization of this Book</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../aci.html">Application Centric Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aci_policy_model.html">ACI Policy Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#abstraction-model">Abstraction Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#everything-is-an-object">Everything is an Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#relevant-objects-and-relationships">Relevant Objects and Relationships</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#hierarchical-aci-object-model-and-the-infrastructure">Hierarchical ACI Object Model and the Infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#infrastructure-as-objects">Infrastructure as Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#build-object-use-object-to-build-policy-reuse-policy">Build object, use object to build policy, reuse policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#rest-api-just-exposes-the-object-model">REST API just exposes the object model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#logical-model-resolved-model-concrete-model">Logical model, Resolved model, concrete model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#formed-and-unformed-relationships">Formed and Unformed Relationships</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#declarative-end-state-and-promise-theory">Declarative End State and Promise Theory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools.html">Troubleshooting Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#apic-access-methods">APIC Access Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#programmatic-configuration-python">Programmatic Configuration (Python)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#fabric-node-access-methods">Fabric Node Access Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#exporting-information-from-the-fabric">Exporting information from the Fabric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#external-data-collection-syslog-snmp-call-home">External Data Collection – Syslog, SNMP, Call-Home</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#health-scores">Health Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#atomic-counters">Atomic Counters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ts_methodology.html">Troubleshooting Methodology</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ts_methodology.html#overall-methodology">Overall Methodology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../topology.html">Sample Reference Topology</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../topology.html#physical-fabric-topology">Physical Fabric Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topology.html#logical-application-topology">Logical Application Topology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#naming-conventions">Naming Conventions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hw_bringup.html">Initial Hardware Bringup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../hw_bringup.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hw_bringup.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hw_bringup.html#id2">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fabric_init.html">Fabric Initialization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fabric_init.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fabric_init.html#fabric-verification">Fabric Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fabric_init.html#problem-description">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apic.html">Application Policy Infrastructure Controller (APIC) High Availability and Clustering</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#cluster-formation">Cluster Formation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#majority-and-minority-handling-clustering-split-brains">Majority and Minority - Handling Clustering Split Brains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#id1">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#id4">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#id6">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#id9">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#id12">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#id15">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../firmware.html">Firmware and Image Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../firmware.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware.html#id1">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware.html#id5">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../health.html">Faults / Health Scores</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../health.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../health.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../health.html#id1">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rest.html">REST Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rest.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest.html#problem-description">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mgmt_tn.html">Management Tenant</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mgmt_tn.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mgmt_tn.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mgmt_tn.html#id1">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../common.html">Common Network Services</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../common.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../common.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../common.html#id15">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../unicast.html">Unicast Data Plane Forwarding and Reachability</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../unicast.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unicast.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unicast.html#id1">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pol_cntr.html">Policies and Contracts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pol_cntr.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pol_cntr.html#problem-description">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bridged2ext.html">Bridged Connectivity to External Networks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bridged2ext.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bridged2ext.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bridged2ext.html#id3">Problem Description:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bridged2ext.html#id5">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../routed2ext.html">Routed Connectivity to External Networks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../routed2ext.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routed2ext.html#fabric-verification">Fabric Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routed2ext.html#problem-description">Problem description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routed2ext.html#id1">Problem description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routed2ext.html#id3">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../vmm_ucs.html">Virtual Machine Manager and UCS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../vmm_ucs.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vmm_ucs.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vmm_ucs.html#id2">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vmm_ucs.html#id6">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vmm_ucs.html#id9">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../l4l7.html">L4-L7 Service Insertion</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../l4l7.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../l4l7.html#problem-description">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fn_crash_ts.html">ACI Fabric Node and Process Crash Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fn_crash_ts.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fn_crash_ts.html#problem-description">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apic_crash_ts.html">APIC Process Crash Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../apic_crash_ts.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic_crash_ts.html#problem-description">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendix.html#overview">Overview</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ACI Troubleshooting Book</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div></div>
          <div role="main" class="document">
            
  <div class="section" id="declarative-end-state-and-promise-theory">
<h1>Declarative End State and Promise Theory<a class="headerlink" href="#declarative-end-state-and-promise-theory" title="Permalink to this headline">¶</a></h1>
<p>For many years, infrastructure management has been built on a static and
inflexible configuration paradigm. In terms of theory, traditional
configuration via traditional methods (CLI configuration of each box
individually) where configuration must be done on every device for every
possibility of every thing prior to this thing connecting, is termed an
Imperative Model of configuration. In this model, due to the way configuration
is built for eventual possibility, the trend is to overbuild the
infrastructure configuration to a fairly significant amount. When this is
done, fragility and complexity increase with every eventuality included.</p>
<a class="reference internal image-reference" href="../_images/traditionalpolicy.jpg"><img alt="../_images/traditionalpolicy.jpg" class="align-center" src="../_images/traditionalpolicy.jpg" style="width: 750px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Similar to what is illustrated above, if configuration must be made on a
single port for an ESXi host, it must be configured to trunk all information
for all of the possible VLANs that might get used by a vSwitch or DVS on the
host, whether or not a VM actually exists on that host. On top of that,
additional ACLs may need to be configured for all possible entries on that
port, VLAN or switch to allow/restrict traffic to/from the VMs that might end
up migrating to that host/segment/switch. That is a fairly heavyweight set of
tasks for just some portions of the infrastructure, and that continues to
build as peripheral aspects of this same problem are evaluated. As these
configurations are built, hardware resource tables are filled up even if they
are not needed for actual forwarding. Also reflected are configurations on the
service nodes for eventualities that can build and grow, many times being
added but rarely ever removed. This eventually can grow into a fairly fragile
state that might be considered a form of firewall house of cards. As these
building blocks are built up over time and a broader perspective is taken, it
becomes difficult to understand which ones can be removed without the whole
stack tumbling down. This is one of the possible things that can happen when
things are built on an imperative model.</p>
<a class="reference internal image-reference" href="../_images/policymodeltheory.jpg"><img alt="../_images/policymodeltheory.jpg" class="align-center" src="../_images/policymodeltheory.jpg" style="width: 750px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>On the other hand, a declarative mode allows a system to describe the
“end-state” expectations system-wide as depicted above, and allows the system
to utilize its knowledge of the integrated hardware and automation tools to
execute the required work to deliver the end state. Imagine an infrastructure
system where statements of desire can be made, such as “these things should
connect to those things and let them talk in this way”, and the infrastructure
converges on that desired end state. When that configuration is no longer
needed, the system knows this and removes that configuration.</p>
<a class="reference internal image-reference" href="../_images/promise-theory.jpg"><img alt="../_images/promise-theory.jpg" class="align-center" src="../_images/promise-theory.jpg" style="width: 750px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Promise Theory is built on the principles that allow for systems to be
designed based on the declarative model. It’s built on voluntary execution by
autonomous agents which provide and consume services from one another based on
promises.</p>
<p>As the IT industry continues to build and scale more and more, information and
systems are rapidly reaching breaking points where scaled-out infrastructure
cannot stretch to the hardware resources without violating the economic
equilibrium, nor scale-in the management without integrated agent-based
automation. This is why Cisco ACI, as a system built on promise theory, is a
purpose-built system for addressing scale problems that are delivery
challenges with traditional models.</p>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Andres Vega, Bryan Deaver, Jerry Ye, Kannan Ponnuswamy, Loy Evans, Mike Timm, Paul Lesiak and Paul Raytick.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-60418502-1', 'auto');
    ga('send', 'pageview');

  </script>
   

</body>
</html>
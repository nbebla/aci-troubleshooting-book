

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>APIC Access Methods &mdash; ACI Troubleshooting Book 0.0.1 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic|Roboto+Slab:400,700|Inconsolata:400,700&subset=latin,cyrillic' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="ACI Troubleshooting Book 0.0.1 documentation" href="../index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        
          <a href="../index.html" class="fa fa-home"> ACI Troubleshooting Book</a>
        
        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../preface.html">Preface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#authors-and-contributors">Authors and Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#authors">Authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#distinguished-contributors">Distinguished Contributors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#dedications">Dedications</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#acknowledgments">Acknowledgments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#book-writing-methodology">Book Writing Methodology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#who-should-read-this-book">Who Should Read This Book?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../preface.html#organization-of-this-book">Organization of this Book</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../aci.html">Application Centric Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../aci_policy_model.html">ACI Policy Model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#abstraction-model">Abstraction Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#everything-is-an-object">Everything is an Object</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#relevant-objects-and-relationships">Relevant Objects and Relationships</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#hierarchical-aci-object-model-and-the-infrastructure">Hierarchical ACI Object Model and the Infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#infrastructure-as-objects">Infrastructure as Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#build-object-use-object-to-build-policy-reuse-policy">Build object, use object to build policy, reuse policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#rest-api-just-exposes-the-object-model">REST API just exposes the object model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#logical-model-resolved-model-concrete-model">Logical model, Resolved model, concrete model</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#formed-and-unformed-relationships">Formed and Unformed Relationships</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aci_policy_model.html#declarative-end-state-and-promise-theory">Declarative End State and Promise Theory</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tools.html">Troubleshooting Tools</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#apic-access-methods">APIC Access Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#programmatic-configuration-python">Programmatic Configuration (Python)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#fabric-node-access-methods">Fabric Node Access Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#exporting-information-from-the-fabric">Exporting information from the Fabric</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#external-data-collection-syslog-snmp-call-home">External Data Collection – Syslog, SNMP, Call-Home</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#health-scores">Health Scores</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tools.html#atomic-counters">Atomic Counters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ts_methodology.html">Troubleshooting Methodology</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ts_methodology.html#overall-methodology">Overall Methodology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../topology.html">Sample Reference Topology</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../topology.html#physical-fabric-topology">Physical Fabric Topology</a></li>
<li class="toctree-l2"><a class="reference internal" href="../topology.html#logical-application-topology">Logical Application Topology</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html#naming-conventions">Naming Conventions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../hw_bringup.html">Initial Hardware Bringup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../hw_bringup.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hw_bringup.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hw_bringup.html#id2">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fabric_init.html">Fabric Initialization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fabric_init.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fabric_init.html#fabric-verification">Fabric Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fabric_init.html#problem-description">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apic.html">Application Policy Infrastructure Controller (APIC) High Availability and Clustering</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#cluster-formation">Cluster Formation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#majority-and-minority-handling-clustering-split-brains">Majority and Minority - Handling Clustering Split Brains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#id1">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#id4">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#id6">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#id9">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#id12">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic.html#id15">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../firmware.html">Firmware and Image Management</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../firmware.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware.html#id1">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../firmware.html#id5">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../health.html">Faults / Health Scores</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../health.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../health.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../health.html#id1">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rest.html">REST Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../rest.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rest.html#problem-description">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mgmt_tn.html">Management Tenant</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../mgmt_tn.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mgmt_tn.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mgmt_tn.html#id1">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../common.html">Common Network Services</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../common.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../common.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../common.html#id15">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../unicast.html">Unicast Data Plane Forwarding and Reachability</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../unicast.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unicast.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unicast.html#id1">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../pol_cntr.html">Policies and Contracts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../pol_cntr.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pol_cntr.html#problem-description">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../bridged2ext.html">Bridged Connectivity to External Networks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../bridged2ext.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bridged2ext.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bridged2ext.html#id3">Problem Description:</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bridged2ext.html#id5">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../routed2ext.html">Routed Connectivity to External Networks</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../routed2ext.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routed2ext.html#fabric-verification">Fabric Verification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routed2ext.html#problem-description">Problem description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routed2ext.html#id1">Problem description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../routed2ext.html#id3">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../vmm_ucs.html">Virtual Machine Manager and UCS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../vmm_ucs.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vmm_ucs.html#problem-description">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vmm_ucs.html#id2">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vmm_ucs.html#id6">Problem Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vmm_ucs.html#id9">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../l4l7.html">L4-L7 Service Insertion</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../l4l7.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../l4l7.html#problem-description">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fn_crash_ts.html">ACI Fabric Node and Process Crash Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../fn_crash_ts.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fn_crash_ts.html#problem-description">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apic_crash_ts.html">APIC Process Crash Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../apic_crash_ts.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../apic_crash_ts.html#problem-description">Problem Description</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../appendix.html">Appendix</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../appendix.html#overview">Overview</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">ACI Troubleshooting Book</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div></div>
          <div role="main" class="document">
            
  <div class="section" id="apic-access-methods">
<h1>APIC Access Methods<a class="headerlink" href="#apic-access-methods" title="Permalink to this headline">¶</a></h1>
<p>There are multiple ways to connect to and manage the ACI fabric and object
model. An administrator can use the built-in Graphical User Interface (GUI),
programmatic methods using an Application Programming Interface (API), or
standard Command Line Interface (CLI). While there are multiple ways to access
the APIC, the APIC is still the single point of truth. All of these access
methods - the GUI, CLI and REST API - are just interfaces resolving to the
API, which is the abstraction of the object model managed by the DME.</p>
<div class="section" id="gui">
<h2>GUI<a class="headerlink" href="#gui" title="Permalink to this headline">¶</a></h2>
<p>One of the primary ways to configure, verify and monitor the ACI fabric is
through the APIC GUI. The APIC GUI is a browser-based HTML5 application that
provides a representation of the object model and would be the most likely
default interface that people would start with. GUI access is accessible
through a browser at the URL <a class="reference external" href="https:/">https:/</a>/&lt;APIC IP&gt;
The GUI does not expose the underlying policy object model. One of the
available tools for browsing the MIT in addition to leveraging the CLI is
called “visore” and is available on the APIC and nodes. Visore supports
querying by class and object, as well as easily navigating the hierarchy of
the tree. Visore is accessible through a browser at the URL <a class="reference external" href="https:/">https:/</a>/&lt;APIC
IP&gt;/visore.html</p>
</div>
<div class="section" id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<p>The APIC supports REST API connections via HTTP/HTTPS for processing of
XML/JSON documents for rapid configuration. The API can also be used to verify
the configured policy on the system. This is covered in details in the REST
API chapter.</p>
<p>A common tool used to query the system is a web browser based APP that runs on
Google Chrome (tm) web browser called &#8220;Postman&#8221;.</p>
</div>
<div class="section" id="cli">
<h2>CLI<a class="headerlink" href="#cli" title="Permalink to this headline">¶</a></h2>
<p>The CLI can be used in configuring the APIC. It can be used extensively in
troubleshooting the system as it allows real-time visibility of the
configuration, faults, and statistics of the system or alternatively as an
object model browser. Typically the CLI is accessed via SSH with the
appropriate administrative level credentials. The APIC CLI can be accessed as
well through the CIMC KVM (Cisco Integrated Management Console Keyboard Video
Mouse interface).</p>
<p>CLI access is also available for troubleshooting the fabric nodes either
through SSH or the console.</p>
<p>The APIC and fabric nodes are based on a Linux kernel but there are some ACI
specific commands and modes of access that will be used in this book.</p>
<div class="section" id="cli-modes">
<h3>CLI MODES:<a class="headerlink" href="#cli-modes" title="Permalink to this headline">¶</a></h3>
<div class="section" id="apic">
<h4>APIC:<a class="headerlink" href="#apic" title="Permalink to this headline">¶</a></h4>
<p>The APIC has fundamentally only one CLI access mode. The commands used in this
book are assuming admininistrave level access to the APIC by use of the admin
user account.</p>
</div>
<div class="section" id="fabric-node">
<h4>Fabric Node:<a class="headerlink" href="#fabric-node" title="Permalink to this headline">¶</a></h4>
<p>The switch running ACI software has several different modes that can be used
to access different levels of information on the system:</p>
<ul class="simple">
<li>CLI - The CLI will be used to run NX-OS and Bash shell commands to check the
concrete models on the switch. For example show vlan, show endpoint, etc. In
some documentation this may have been referred to as Bash, iBash, or iShell.</li>
<li>vsh_lc - This is the line card shell and it will be used to check line card
processes and forwarding tables specific to the Application Leaf Engine (ALE)
ASIC.</li>
<li>Broadcom Shell - This shell is used to view information on the Broadcom
ASIC. The shell will not be covered as it falls outside the scope of this
book as its assumed troubleshooting at a Broadcom Shell level should be
performed with assistance of Cisco Technical Assistance Center (TAC). Virtual
Shell</li>
<li>(VSH): Provides deprecated NX-OS CLI shell access to the switch. This mode
can provide output on a switch in ACI mode that could be inaccurate. This
mode is not recommended, not supported, and commands that provide useful
output should be available from the normal CLI access mode.</li>
</ul>
</div>
</div>
<div class="section" id="navigating-the-cli">
<h3>Navigating the CLI:<a class="headerlink" href="#navigating-the-cli" title="Permalink to this headline">¶</a></h3>
<p>There are some common commands as well as some unique differences than might
be seen in NX-OS on a fabric node. On the APIC, the command structure has
common commands as well as some unique differences compared to Linux Bash.
This section will present a highlight of a few of these commands but is not
meant to replace existing external documentation on Linux, Bash, ACI, and
NX-OS.</p>
<div class="section" id="common-bash-commands">
<h4>Common Bash commands:<a class="headerlink" href="#common-bash-commands" title="Permalink to this headline">¶</a></h4>
<p>When using the CLI, some basic understanding of Linux and Bash is necessary.
These commands include:</p>
<ul class="simple">
<li><strong>man</strong> – prints the online manual pages. For example, man cd will display</li>
<li><strong>what</strong> the command cd does</li>
<li><strong>ls</strong> – list directory contents</li>
<li><strong>cd</strong> – change directory</li>
<li><strong>cat</strong> – print the contents of a file less – simple navigation tool for
displaying the contents of a file</li>
<li><strong>grep</strong> – print out a matching line from a file</li>
<li><strong>ps</strong> – show current running processes – typically used with the options
<strong>ps –ef</strong></li>
<li><strong>netstat</strong> – display network connection status.  <strong>netstat –a</strong> will display
active and ports which the system is listening on</li>
<li><strong>ip route show</strong> – displays the kernel route table. This is useful on the
APIC but not on the fabric node</li>
<li><strong>pwd</strong> – print the current directory</li>
</ul>
</div>
<div class="section" id="common-cli-commands">
<h4>Common CLI commands:<a class="headerlink" href="#common-cli-commands" title="Permalink to this headline">¶</a></h4>
<p>Beyond the normal NX-OS commands on a fabric node, there are several more that
are specific commands to ACI. Some CLI commands referenced in this guide are
listed below:</p>
<ul class="simple">
<li><strong>acidiag</strong> - Specifically <strong>acidiag avread</strong> and <strong>acidiag fnvread</strong> are two
common commands to check the status of the controllers and the fabric nodes</li>
<li><strong>techsupport</strong> – CLI command to collect the techsupport files from the
device</li>
<li><strong>attach</strong> – From the APIC, opens up a ssh session to the names node. For
example <strong>attach rtp_leaf1</strong></li>
<li><strong>iping</strong>/<strong>itraceroute</strong> – Fabric node command used in place of
ping/traceroute which provides similar functionality against an fabric device
address and VRF. Note that the Bash ping and traceroute commands do work but
are effective only for the switch OOB access.</li>
</ul>
</div>
<div class="section" id="help">
<h4>Help:<a class="headerlink" href="#help" title="Permalink to this headline">¶</a></h4>
<p>When navigating around the APIC CLI, there are some differences when
compared to NX-OS.</p>
<ul class="simple">
<li>&lt;ESC&gt;&lt;ESC&gt; - similar to NX-OS “?” to get a list of command options and
keywords.</li>
<li>&lt;TAB&gt; - autocomplete of the command. For example <strong>show int**&lt;TAB&gt; will
complete to **show interface</strong>.</li>
<li><strong>man</strong> &lt;command&gt; - displays the manual and usage output for the command.</li>
</ul>
</div>
</div>
</div>
</div>


          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Andres Vega, Bryan Deaver, Jerry Ye, Kannan Ponnuswamy, Loy Evans, Mike Timm, Paul Lesiak and Paul Raytick.
    </p>
  </div>

  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>